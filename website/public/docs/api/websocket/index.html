<!DOCTYPE html>
<html lang="en-us">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">


<title>WebSocket Events | AI Code Terminal: The AI-Native Shell</title>
<meta name="description" content="Complete WebSocket event reference for real-time terminal and workspace communication">
<meta name="keywords" content="AI development, Claude Code, self-hosted terminal, development environment, AI coding, browser terminal, Docker deployment">
<meta name="author" content="AI Code Terminal">
<meta name="robots" content="index, follow">
<link rel="canonical" href="http://localhost:1313/docs/api/websocket/">


<meta property="og:type" content="article">
<meta property="og:title" content="WebSocket Events | AI Code Terminal: The AI-Native Shell">
<meta property="og:description" content="Complete WebSocket event reference for real-time terminal and workspace communication">
<meta property="og:url" content="http://localhost:1313/docs/api/websocket/">
<meta property="og:site_name" content="AI Code Terminal: The AI-Native Shell">
<meta property="og:image" content="http://localhost:1313/images/claude_code_in_action.png">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="AI Code Terminal - Browser-based development environment with Claude integration">


<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="WebSocket Events | AI Code Terminal: The AI-Native Shell">
<meta name="twitter:description" content="Complete WebSocket event reference for real-time terminal and workspace communication">
<meta name="twitter:image" content="http://localhost:1313/images/claude_code_in_action.png">
<meta name="twitter:image:alt" content="AI Code Terminal - Browser-based development environment with Claude integration">


<link rel="icon" type="image/svg+xml" href="/terminal-icon.svg">
<link rel="icon" type="image/png" href="/favicon.png" sizes="32x32">
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180">


<meta name="theme-color" content="#010411">
<meta name="msapplication-TileColor" content="#010411">


<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500&family=Space+Grotesk:wght@400;500;700&display=swap" rel="stylesheet">


<script src="https://unpkg.com/feather-icons"></script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "AI Code Terminal: The AI-Native Shell",
  "description": "A self-hosted development environment for the post-IDE era. Code from any device with a fast, lightweight, AI-native shell.",
  "url": "http:\/\/localhost:1313\/",
  "applicationCategory": "DeveloperApplication",
  "operatingSystem": "Linux, macOS, Windows",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "author": {
    "@type": "Organization",
    "name": "AI Code Terminal"
  }
}
</script>


<link rel="stylesheet" href="/css/shared.css">

    <link rel="stylesheet" href="/css/docs.css">

</head>
<body class="docs-site">
    
    
    <header>
    <div class="container">
        <nav>
            <a href="http://localhost:1313/" class="logo">
                <span class="prompt-char">&gt;</span> AI Code Terminal
            </a>
            <div class="nav-links">
                <a href="/docs/getting-started/introduction/" class="nav-link">
                    <i data-feather="book"></i>
                    <span>Documentation</span>
                </a>
                <a href="/getting-started/" class="nav-link">
                    <i data-feather="book-open"></i>
                    <span>Getting Started</span>
                </a>
                <a href="https://github.com/drmhse/ai-code-terminal" target="_blank" rel="noopener noreferrer" class="nav-link">
                    <i data-feather="github"></i>
                    <span>View on GitHub</span>
                </a>
            </div>
        </nav>
    </div>
</header>

    <main>
        

<div class="min-h-screen bg-[#010411] text-[#d4dff3]">
  
  
  <button id="mobile-sidebar-toggle" class="lg:hidden fixed top-4 left-4 z-50 p-3 bg-[#0a0c1a] border border-[rgba(67,79,138,0.2)] rounded-lg">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>

  
  <div id="mobile-overlay" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-30 hidden"></div>

  <div class="flex pt-20"> 
    
    
    <aside id="docs-sidebar" class="fixed lg:relative w-80 bg-[rgba(1,4,17,0.95)] border-r border-[rgba(67,79,138,0.2)] h-screen lg:h-[calc(100vh-5rem)] overflow-y-auto backdrop-blur-xl z-40 -translate-x-full lg:translate-x-0 transition-transform duration-300">
      
      
      <div class="sticky top-0 bg-[rgba(1,4,17,0.9)] backdrop-blur-sm border-b border-[rgba(67,79,138,0.2)] p-6">
        <div class="flex items-center space-x-3 mb-6">
          <div class="w-8 h-8 bg-[#82aaff] rounded-lg flex items-center justify-center">
            <svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <h3 class="text-lg font-semibold text-[#d4dff3]">Documentation</h3>
        </div>
        
        
        <div class="relative">
          <svg class="absolute left-3 top-3.5 w-4 h-4 text-[#8b9cc2]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          <input type="text" placeholder="Search docs..." class="w-full pl-10 pr-4 py-3 bg-[rgba(10,12,26,0.6)] border border-[rgba(67,79,138,0.2)] rounded-lg text-[#d4dff3] placeholder-[#8b9cc2] focus:outline-none focus:border-[#82aaff] focus:ring-1 focus:ring-[#82aaff] transition-colors">
        </div>
      </div>

      
      <nav class="p-4 space-y-2">
        
        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="getting-started">
            <span class="uppercase tracking-wider">Getting Started</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/getting-started/introduction/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Introduction
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/getting-started/quick-start/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Quick Start
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/getting-started/installation/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Installation
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/getting-started/github-oauth/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                GitHub OAuth Setup
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/getting-started/configuration/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Configuration
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="core-features">
            <span class="uppercase tracking-wider">Core Features</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/core-features/terminal-access/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Terminal Access
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/core-features/workspace-management/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Workspace Management
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/core-features/github-integration/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                GitHub Integration
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/core-features/claude-integration/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Claude Integration
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/core-features/real-time-features/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Real-time Features
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="authentication">
            <span class="uppercase tracking-wider">Authentication</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/authentication/auth-flow/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Authentication Flow
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/authentication/security-features/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Security Features
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/authentication/token-management/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Token Management
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="api">
            <span class="uppercase tracking-wider">API & WebSocket</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/api/endpoints/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                API Endpoints
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/api/websocket/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors active bg-[rgba(130,170,255,0.1)] !text-[#82aaff] font-medium">
                WebSocket Events
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="database">
            <span class="uppercase tracking-wider">Database</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/database/schema/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Database Schema
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/database/models/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Data Models
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="development">
            <span class="uppercase tracking-wider">Development</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/development/setup/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Development Setup
              </a>
            </li>
            
            <li>
              <a href="http://localhost:1313/docs/development/testing/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Testing
              </a>
            </li>
            
            
          </ul>
        </div>

        
        <div class="nav-section">
          <button class="nav-section-toggle flex items-center justify-between w-full px-3 py-2 text-sm font-medium text-[#82aaff] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors" data-section="deployment">
            <span class="uppercase tracking-wider">Deployment</span>
            <svg class="w-4 h-4 transform transition-transform chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
          <ul class="nav-section-content mt-1 space-y-1 max-h-0 overflow-hidden transition-all duration-300 ease-in-out">
            
            
            <li>
              <a href="http://localhost:1313/docs/deployment/docker/" class="nav-link block py-2 px-6 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded-lg transition-colors ">
                Docker Deployment
              </a>
            </li>
            
            
          </ul>
        </div>

      </nav>
    </aside>

    
    <main class="flex-1 lg:ml-80">
      
      
      <div class="sticky top-20 bg-[rgba(1,4,17,0.9)] backdrop-blur-sm border-b border-[rgba(67,79,138,0.2)] px-8 py-4 z-10">
        <nav class="flex items-center space-x-2 text-sm">
          <a href="/" class="text-[#8b9cc2] hover:text-[#d4dff3] transition-colors">Home</a>
          <svg class="w-4 h-4 text-[#8b9cc2]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
          <a href="/docs" class="text-[#8b9cc2] hover:text-[#d4dff3] transition-colors">Documentation</a>
          
          <svg class="w-4 h-4 text-[#8b9cc2]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
          <a href="http://localhost:1313/docs/api/" class="text-[#8b9cc2] hover:text-[#d4dff3] transition-colors">API &amp; WebSocket</a>
          
          <svg class="w-4 h-4 text-[#8b9cc2]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
          </svg>
          <span class="text-[#82aaff] font-medium">WebSocket Events</span>
        </nav>
      </div>

      <div class="flex">
        
        <article class="flex-1 px-8 py-12 max-w-4xl">
          
          
          <header class="mb-12">
            
            
            <h1 class="text-4xl lg:text-5xl font-bold text-[#d4dff3] mb-6 leading-tight">WebSocket Events</h1>
            
            
            <p class="text-xl text-[#8b9cc2] leading-relaxed mb-8">Complete WebSocket event reference for real-time terminal and workspace communication</p>
            
            
            
            <div class="flex items-center space-x-6 text-sm text-[#8b9cc2]">
              
              
              <div class="flex items-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>8 min read</span>
              </div>
              
            </div>
            
          </header>

          
          <div class="prose prose-invert prose-lg max-w-none">
            <h1 id="websocket-events">WebSocket Events</h1>
<p>AI Code Terminal uses Socket.IO for real-time bidirectional communication between the client and server, enabling instant terminal I/O, workspace updates, and system notifications.</p>
<h2 id="connection-setup">Connection Setup</h2>
<h3 id="client-connection">Client Connection</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Connect with JWT authentication
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">io</span>(<span style="color:#e6db74">&#39;/&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">auth</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">token</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">getItem</span>(<span style="color:#e6db74">&#39;jwt_token&#39;</span>)
</span></span><span style="display:flex;"><span>  },
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">transports</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;websocket&#39;</span>, <span style="color:#e6db74">&#39;polling&#39;</span>]
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Connection event handlers
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;connect&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Connected to server&#39;</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;disconnect&#39;</span>, (<span style="color:#a6e22e">reason</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Disconnected:&#39;</span>, <span style="color:#a6e22e">reason</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;connect_error&#39;</span>, (<span style="color:#a6e22e">error</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Connection failed:&#39;</span>, <span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="server-authentication">Server Authentication</h3>
<p>The server validates JWT tokens for all WebSocket connections:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// Server-side authentication middleware
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">io</span>.<span style="color:#a6e22e">use</span>((<span style="color:#a6e22e">socket</span>, <span style="color:#a6e22e">next</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">token</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">handshake</span>.<span style="color:#a6e22e">auth</span>.<span style="color:#a6e22e">token</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">jwt</span>.<span style="color:#a6e22e">verify</span>(<span style="color:#a6e22e">token</span>, <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">JWT_SECRET</span>, (<span style="color:#a6e22e">err</span>, <span style="color:#a6e22e">decoded</span>) =&gt; {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">next</span>(<span style="color:#66d9ef">new</span> Error(<span style="color:#e6db74">&#39;Authentication failed&#39;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">userId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">decoded</span>.<span style="color:#a6e22e">userId</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">username</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">decoded</span>.<span style="color:#a6e22e">username</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">next</span>();
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 id="terminal-events">Terminal Events</h2>
<h3 id="terminal-creation-and-management">Terminal Creation and Management</h3>
<h4 id="create-terminal"><code>create-terminal</code></h4>
<p>Creates a new terminal session in a workspace.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;create-terminal&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">shell</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;bash&#39;</span>, <span style="color:#75715e">// optional: &#39;bash&#39;, &#39;zsh&#39;, &#39;fish&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">cols</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">80</span>,      <span style="color:#75715e">// terminal columns
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">rows</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">24</span>       <span style="color:#75715e">// terminal rows
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-created&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Terminal created:&#39;</span>, <span style="color:#a6e22e">data</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   sessionId: &#39;session_uuid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   shell: &#39;bash&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   pid: 12345
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="terminal-input"><code>terminal-input</code></h4>
<p>Sends user input to the terminal session.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;terminal-input&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">sessionId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;session_uuid&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;ls -la\r&#39;</span>  <span style="color:#75715e">// Command with carriage return
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="terminal-output"><code>terminal-output</code></h4>
<p>Receives terminal output from the server.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-output&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Write output to xterm.js terminal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">terminal</span>.<span style="color:#a6e22e">write</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">output</span>);
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   sessionId: &#39;session_uuid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   output: &#39;total 48\ndrwxr-xr-x 12 user user 4096 Jan 10 15:30 .\n...&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   timestamp: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="terminal-resize"><code>terminal-resize</code></h4>
<p>Resizes the terminal session.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;terminal-resize&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">sessionId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;session_uuid&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cols</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">120</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rows</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="kill-terminal"><code>kill-terminal</code></h4>
<p>Terminates a terminal session.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;kill-terminal&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">sessionId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;session_uuid&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-killed&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Terminal terminated:&#39;</span>, <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">sessionId</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="terminal-session-events">Terminal Session Events</h3>
<h4 id="session-status"><code>session-status</code></h4>
<p>Provides real-time session status updates.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;session-status&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   sessionId: &#39;session_uuid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   status: &#39;active&#39; | &#39;inactive&#39; | &#39;terminated&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   pid: 12345,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   lastActivity: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="process-exit"><code>process-exit</code></h4>
<p>Notifies when a process exits in the terminal.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;process-exit&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   sessionId: &#39;session_uuid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   pid: 12345,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   exitCode: 0,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   signal: null
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="workspace-events">Workspace Events</h2>
<h3 id="workspace-management">Workspace Management</h3>
<h4 id="create-workspace"><code>create-workspace</code></h4>
<p>Creates a new workspace by cloning a repository.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;create-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;my-project&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">githubRepo</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;octocat/my-project&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">githubUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://github.com/octocat/my-project&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">branch</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;main&#39;</span> <span style="color:#75715e">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p><strong>Server → Client Progress:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-progress&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   step: &#39;cloning&#39; | &#39;configuring&#39; | &#39;completed&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   progress: 45, // percentage
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;Cloning repository...&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p><strong>Server → Client Completion:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-created&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspace: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     id: &#39;clp789ghi&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     name: &#39;my-project&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     localPath: &#39;/app/workspaces/my-project&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     githubRepo: &#39;octocat/my-project&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="clone-workspace"><code>clone-workspace</code></h4>
<p>Clones an existing repository to a new workspace.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;clone-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">repositoryId</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">123456</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;custom-workspace-name&#39;</span>, <span style="color:#75715e">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">branch</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;develop&#39;</span> <span style="color:#75715e">// optional
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="delete-workspace"><code>delete-workspace</code></h4>
<p>Deletes a workspace and all its data.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;delete-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-deleted&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   success: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="sync-workspace"><code>sync-workspace</code></h4>
<p>Synchronizes workspace with remote repository.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;sync-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">operation</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;pull&#39;</span> <span style="color:#75715e">// &#39;pull&#39;, &#39;fetch&#39;, &#39;push&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-synced&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   operation: &#39;pull&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   changes: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     added: 2,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     modified: 5,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     deleted: 1
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   success: true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h3 id="workspace-status-updates">Workspace Status Updates</h3>
<h4 id="workspace-status"><code>workspace-status</code></h4>
<p>Real-time workspace status information.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-status&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   git: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     branch: &#39;main&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     ahead: 2,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     behind: 0,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     modified: 3,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     staged: 1,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     untracked: 2
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   processes: [
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     { pid: 12345, command: &#39;npm run dev&#39;, status: &#39;running&#39; }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   ],
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   lastActivity: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="get-workspace-status"><code>get-workspace-status</code></h4>
<p>Request current workspace status.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;get-workspace-status&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="file-system-events">File System Events</h3>
<h4 id="file-changed"><code>file-changed</code></h4>
<p>Notifies of file system changes in workspace.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;file-changed&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   path: &#39;src/components/Header.tsx&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   type: &#39;modified&#39; | &#39;created&#39; | &#39;deleted&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   timestamp: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="github-integration-events">GitHub Integration Events</h2>
<h3 id="repository-management">Repository Management</h3>
<h4 id="get-repositories"><code>get-repositories</code></h4>
<p>Fetch GitHub repositories for the authenticated user.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;get-repositories&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">page</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">1</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">per_page</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">sort</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;updated&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;repositories-loaded&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   repositories: [...],
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   total_count: 25,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   page: 1,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   has_next: false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="repository-selected"><code>repository-selected</code></h4>
<p>Notifies when a repository is selected for workspace creation.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;repository-selected&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">repositoryId</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">123456</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">action</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;create-workspace&#39;</span> <span style="color:#f92672">|</span> <span style="color:#e6db74">&#39;view-details&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 id="system-events">System Events</h2>
<h3 id="health-and-monitoring">Health and Monitoring</h3>
<h4 id="system-stats"><code>system-stats</code></h4>
<p>Request current system statistics.</p>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;system-stats&#39;</span>);
</span></span></code></pre></div><p><strong>Server → Client Response:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;system-stats&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   memory: { used: &#39;256 MB&#39;, total: &#39;4 GB&#39;, percentage: 6.4 },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   cpu: { usage: 15 },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   activeConnections: 3,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   activeSessions: 2,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   uptime: 86400
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="health-check"><code>health-check</code></h4>
<p>Periodic health check events.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;health-status&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   status: &#39;healthy&#39; | &#39;degraded&#39; | &#39;unhealthy&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   services: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     database: &#39;operational&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     github_api: &#39;operational&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//     file_system: &#39;operational&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   },
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   timestamp: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="error-handling-events">Error Handling Events</h2>
<h3 id="error-notifications">Error Notifications</h3>
<h4 id="error"><code>error</code></h4>
<p>General error event for WebSocket operations.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, (<span style="color:#a6e22e">error</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Socket error:&#39;</span>, <span style="color:#a6e22e">error</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// error: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   code: &#39;WORKSPACE_NOT_FOUND&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;Workspace not found&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   details: &#39;Workspace clp123abc does not exist&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   timestamp: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="terminal-error"><code>terminal-error</code></h4>
<p>Terminal-specific errors.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-error&#39;</span>, (<span style="color:#a6e22e">error</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// error: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   sessionId: &#39;session_uuid&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   code: &#39;SPAWN_FAILED&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;Failed to spawn terminal process&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   details: &#39;Shell executable not found&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h4 id="workspace-error"><code>workspace-error</code></h4>
<p>Workspace operation errors.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-error&#39;</span>, (<span style="color:#a6e22e">error</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// error: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   operation: &#39;clone&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   code: &#39;GIT_CLONE_FAILED&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;Repository clone failed&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   details: &#39;Authentication failed for private repository&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="authentication-events">Authentication Events</h2>
<h3 id="session-management">Session Management</h3>
<h4 id="auth-required"><code>auth-required</code></h4>
<p>Notifies client that authentication is required.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;auth-required&#39;</span>, () =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Redirect user to login
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/login&#39;</span>;
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="session-expired"><code>session-expired</code></h4>
<p>Notifies when the session has expired.</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;session-expired&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;Session expired, please login again&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   expiredAt: &#39;2024-01-10T15:30:00.000Z&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Clear local storage and redirect
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">removeItem</span>(<span style="color:#e6db74">&#39;jwt_token&#39;</span>);
</span></span><span style="display:flex;"><span>  window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/login&#39;</span>;
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h4 id="force-logout"><code>force-logout</code></h4>
<p>Server-initiated logout (emergency or security reasons).</p>
<p><strong>Server → Client:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;force-logout&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   reason: &#39;Security incident detected&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   message: &#39;You have been logged out for security reasons&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Immediate logout
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">localStorage</span>.<span style="color:#a6e22e">removeItem</span>(<span style="color:#e6db74">&#39;jwt_token&#39;</span>);
</span></span><span style="display:flex;"><span>  window.<span style="color:#a6e22e">location</span>.<span style="color:#a6e22e">href</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;/login&#39;</span>;
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 id="room-management">Room Management</h2>
<p>WebSocket connections are organized into rooms for efficient message distribution:</p>
<h3 id="room-types">Room Types</h3>
<ul>
<li><strong>User Room:</strong> <code>user_${userId}</code> - User-specific notifications</li>
<li><strong>Workspace Room:</strong> <code>workspace_${workspaceId}</code> - Workspace-specific events</li>
<li><strong>Session Room:</strong> <code>session_${sessionId}</code> - Terminal session events</li>
</ul>
<h3 id="joining-rooms">Joining Rooms</h3>
<p><strong>Client → Server:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;join-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p><strong>Server → Client Confirmation:</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;joined-workspace&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// data: {
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   workspaceId: &#39;clp123abc&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//   room: &#39;workspace_clp123abc&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">// }
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><h2 id="event-flow-examples">Event Flow Examples</h2>
<h3 id="complete-terminal-session-flow">Complete Terminal Session Flow</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 1. Create terminal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;create-terminal&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;clp123abc&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">cols</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">80</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">rows</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">24</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. Terminal created confirmation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-created&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">sessionId</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">sessionId</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 3. Send command
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;terminal-input&#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">sessionId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">sessionId</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">data</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;npm install\r&#39;</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 4. Receive output
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;terminal-output&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">terminal</span>.<span style="color:#a6e22e">write</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">output</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 5. Monitor process completion
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;process-exit&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">exitCode</span> <span style="color:#f92672">===</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Command completed successfully&#39;</span>);
</span></span><span style="display:flex;"><span>  } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Command failed with exit code:&#39;</span>, <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">exitCode</span>);
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="workspace-creation-with-progress">Workspace Creation with Progress</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#75715e">// 1. Start workspace creation
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;create-workspace&#39;</span>, {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;my-project&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">githubRepo</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;octocat/my-project&#39;</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">githubUrl</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://github.com/octocat/my-project&#39;</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 2. Monitor progress
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-progress&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">updateProgressBar</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">progress</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">showStatusMessage</span>(<span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 3. Handle completion
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-created&#39;</span>, (<span style="color:#a6e22e">data</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">workspace</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">data</span>.<span style="color:#a6e22e">workspace</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// 4. Automatically create terminal
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">emit</span>(<span style="color:#e6db74">&#39;create-terminal&#39;</span>, {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">workspaceId</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">workspace</span>.<span style="color:#a6e22e">id</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">cols</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">120</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">rows</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 5. Handle errors
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;workspace-error&#39;</span>, (<span style="color:#a6e22e">error</span>) =&gt; {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">showErrorMessage</span>(<span style="color:#a6e22e">error</span>.<span style="color:#a6e22e">message</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">hideProgressBar</span>();
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h2 id="client-libraries-and-helpers">Client Libraries and Helpers</h2>
<h3 id="typescript-definitions">TypeScript Definitions</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">SocketEvents</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Terminal events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#39;create-terminal&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">CreateTerminalRequest</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;terminal-created&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">TerminalCreatedResponse</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;terminal-input&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">TerminalInputData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;terminal-output&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">TerminalOutputData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;terminal-resize&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">TerminalResizeData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;kill-terminal&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">KillTerminalRequest</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;terminal-killed&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">TerminalKilledResponse</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// Workspace events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#39;create-workspace&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">CreateWorkspaceRequest</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;workspace-created&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">WorkspaceCreatedResponse</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;workspace-progress&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">WorkspaceProgressData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;workspace-status&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">WorkspaceStatusData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;delete-workspace&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">DeleteWorkspaceRequest</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;workspace-deleted&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">WorkspaceDeletedResponse</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// System events
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#e6db74">&#39;system-stats&#39;</span><span style="color:#f92672">:</span> () <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;health-status&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">data</span>: <span style="color:#66d9ef">HealthStatusData</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>  <span style="color:#e6db74">&#39;error&#39;</span><span style="color:#f92672">:</span> (<span style="color:#a6e22e">error</span>: <span style="color:#66d9ef">SocketError</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#66d9ef">void</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Usage with typed socket
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socket</span>: <span style="color:#66d9ef">Socket</span>&lt;<span style="color:#f92672">SocketEvents</span>&gt; <span style="color:#f92672">=</span> <span style="color:#a6e22e">io</span>(<span style="color:#e6db74">&#39;/&#39;</span>);
</span></span></code></pre></div><h3 id="react-hook-example">React Hook Example</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">useEffect</span>, <span style="color:#a6e22e">useRef</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;react&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">io</span>, <span style="color:#a6e22e">Socket</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;socket.io-client&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">useSocket</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">token</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">|</span> <span style="color:#66d9ef">null</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socketRef</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">useRef</span>&lt;<span style="color:#f92672">Socket</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">null</span>&gt;(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">useEffect</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">token</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socketRef</span>.<span style="color:#a6e22e">current</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">io</span>(<span style="color:#e6db74">&#39;/&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">auth</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">token</span> },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">transports</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;websocket&#39;</span>, <span style="color:#e6db74">&#39;polling&#39;</span>]
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">socketRef</span>.<span style="color:#a6e22e">current</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;connect&#39;</span>, () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Socket connected&#39;</span>);
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;disconnect&#39;</span>, (<span style="color:#a6e22e">reason</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Socket disconnected:&#39;</span>, <span style="color:#a6e22e">reason</span>);
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">disconnect</span>();
</span></span><span style="display:flex;"><span>      };
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }, [<span style="color:#a6e22e">token</span>]);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">socketRef</span>.<span style="color:#a6e22e">current</span>;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h3 id="vuejs-composable">Vue.js Composable</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-typescript" data-lang="typescript"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">ref</span>, <span style="color:#a6e22e">onMounted</span>, <span style="color:#a6e22e">onUnmounted</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;vue&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">io</span>, <span style="color:#a6e22e">Socket</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;socket.io-client&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">useSocket</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">token</span>: <span style="color:#66d9ef">Ref</span>&lt;<span style="color:#f92672">string</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">null</span>&gt;) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">socket</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>&lt;<span style="color:#f92672">Socket</span> <span style="color:#960050;background-color:#1e0010">|</span> <span style="color:#a6e22e">null</span>&gt;(<span style="color:#66d9ef">null</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">connected</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ref</span>(<span style="color:#66d9ef">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">onMounted</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">token</span>.<span style="color:#a6e22e">value</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">io</span>(<span style="color:#e6db74">&#39;/&#39;</span>, {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">auth</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">token</span>: <span style="color:#66d9ef">token.value</span> },
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">transports</span><span style="color:#f92672">:</span> [<span style="color:#e6db74">&#39;websocket&#39;</span>, <span style="color:#e6db74">&#39;polling&#39;</span>]
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;connect&#39;</span>, () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">connected</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">value</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;disconnect&#39;</span>, () <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#a6e22e">connected</span>.<span style="color:#a6e22e">value</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>      });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">onUnmounted</span>(() <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">socket</span>.<span style="color:#a6e22e">value</span><span style="color:#f92672">?</span>.<span style="color:#a6e22e">disconnect</span>();
</span></span><span style="display:flex;"><span>  });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">return</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">socket</span>: <span style="color:#66d9ef">readonly</span>(<span style="color:#a6e22e">socket</span>),
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">connected</span>: <span style="color:#66d9ef">readonly</span>(<span style="color:#a6e22e">connected</span>)
</span></span><span style="display:flex;"><span>  };
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h2 id="performance-considerations">Performance Considerations</h2>
<h3 id="connection-optimization">Connection Optimization</h3>
<ul>
<li><strong>Connection Pooling:</strong> Reuse existing connections</li>
<li><strong>Transport Selection:</strong> WebSocket preferred, with fallbacks</li>
<li><strong>Heartbeat Configuration:</strong> Optimized ping/pong intervals</li>
<li><strong>Compression:</strong> Enable compression for large messages</li>
</ul>
<h3 id="message-optimization">Message Optimization</h3>
<ul>
<li><strong>Batching:</strong> Combine multiple small messages</li>
<li><strong>Throttling:</strong> Limit high-frequency events (terminal output)</li>
<li><strong>Selective Updates:</strong> Only send changed data</li>
<li><strong>Binary Data:</strong> Use binary transport for large payloads</li>
</ul>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><strong><a href="/docs/database/schema/">Database Schema</a>:</strong> Data models and relationships</li>
<li><strong><a href="/docs/development/setup/">Development Setup</a>:</strong> Development environment</li>
<li><strong><a href="/docs/deployment/production/">Production Setup</a>:</strong> Production deployment</li>
</ul>

          </div>

          
          <nav class="flex justify-between items-center mt-16 pt-8 border-t border-[rgba(67,79,138,0.2)]">
            <div>
              
            </div>
            <div>
              
              <a href="http://localhost:1313/docs/api/endpoints/" class="inline-flex flex-col items-end px-6 py-4 bg-[rgba(10,12,26,0.5)] border border-[rgba(67,79,138,0.2)] rounded-lg hover:bg-[rgba(130,170,255,0.05)] hover:border-[#82aaff] transition-all transform hover:-translate-y-1">
                <span class="text-xs text-[#8b9cc2] uppercase tracking-wider mb-1">Next</span>
                <span class="text-[#d4dff3] font-medium">API Endpoints</span>
              </a>
              
            </div>
          </nav>
        </article>

        
        <aside class="hidden xl:block w-80 p-8 sticky top-32 self-start max-h-[calc(100vh-8rem)] overflow-y-auto">
          <div class="bg-[rgba(10,12,26,0.3)] border border-[rgba(67,79,138,0.2)] rounded-lg p-6">
            <h3 class="flex items-center text-[#82aaff] font-medium mb-4">
              <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"></path>
              </svg>
              On This Page
            </h3>
            <div id="table-of-contents" class="space-y-1">
              
            </div>
          </div>
        </aside>

      </div>
    </main>
  </div>
</div>


<script>
document.addEventListener('DOMContentLoaded', function() {
  
  const mobileSidebarToggle = document.getElementById('mobile-sidebar-toggle');
  const mobileOverlay = document.getElementById('mobile-overlay');
  const sidebar = document.getElementById('docs-sidebar');

  function toggleMobileSidebar() {
    sidebar.classList.toggle('-translate-x-full');
    mobileOverlay.classList.toggle('hidden');
    document.body.classList.toggle('overflow-hidden');
  }

  mobileSidebarToggle.addEventListener('click', toggleMobileSidebar);
  mobileOverlay.addEventListener('click', toggleMobileSidebar);

  
  const navSectionToggles = document.querySelectorAll('.nav-section-toggle');
  
  navSectionToggles.forEach(toggle => {
    toggle.addEventListener('click', function() {
      const section = this.closest('.nav-section');
      const content = section.querySelector('.nav-section-content');
      const chevron = this.querySelector('.chevron');
      
      if (content.style.maxHeight === '0px' || content.style.maxHeight === '') {
        content.style.maxHeight = content.scrollHeight + 'px';
        chevron.style.transform = 'rotate(90deg)';
      } else {
        content.style.maxHeight = '0px';
        chevron.style.transform = 'rotate(0deg)';
      }
    });
  });

  
  const activeLink = document.querySelector('.nav-link.active');
  if (activeLink) {
    const section = activeLink.closest('.nav-section');
    if (section) {
      const content = section.querySelector('.nav-section-content');
      const chevron = section.querySelector('.chevron');
      content.style.maxHeight = content.scrollHeight + 'px';
      chevron.style.transform = 'rotate(90deg)';
    }
  }

  
  function generateTableOfContents() {
    const headings = document.querySelectorAll('article h2, article h3, article h4, article h5, article h6');
    const toc = document.getElementById('table-of-contents');
    
    if (headings.length === 0 || !toc) return;

    headings.forEach((heading, index) => {
      
      if (!heading.id) {
        heading.id = heading.textContent.toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-').replace(/^-|-$/g, '');
      }

      const link = document.createElement('a');
      link.href = '#' + heading.id;
      link.textContent = heading.textContent;
      link.className = 'block py-1.5 px-3 text-sm text-[#8b9cc2] hover:text-[#d4dff3] hover:bg-[rgba(130,170,255,0.05)] rounded transition-colors';
      
      
      const level = parseInt(heading.tagName.charAt(1));
      if (level > 2) {
        link.style.paddingLeft = `${(level - 2) * 16 + 12}px`;
        link.style.borderLeft = '1px solid rgba(67,79,138,0.2)';
      }

      toc.appendChild(link);
    });

    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        const id = entry.target.id;
        const link = toc.querySelector(`a[href="#${id}"]`);
        if (link) {
          if (entry.isIntersecting) {
            toc.querySelectorAll('a').forEach(l => l.classList.remove('!text-[#82aaff]', 'bg-[rgba(130,170,255,0.1)]', 'font-medium'));
            link.classList.add('!text-[#82aaff]', 'bg-[rgba(130,170,255,0.1)]', 'font-medium');
          }
        }
      });
    }, { rootMargin: '-100px 0px -80% 0px' });

    headings.forEach((heading) => {
      observer.observe(heading);
    });
  }

  generateTableOfContents();

  
  document.addEventListener('click', function(e) {
    if (e.target.matches('a[href^="#"]')) {
      e.preventDefault();
      const target = document.querySelector(e.target.getAttribute('href'));
      if (target) {
        target.scrollIntoView({ behavior: 'smooth', block: 'start' });
      }
    }
  });
});
</script>

    </main>

    <footer class="fade-in-section">
    <div class="container">
        <p>&copy; 2025 AI Code Terminal. A statement on developer sovereignty.</p>
    </div>
</footer>
    
<script>
    feather.replace();
</script>

    <script src="/js/docs.js"></script>

</body>
</html>